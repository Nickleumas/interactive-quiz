const questions = {
    Business: [
        {
            question: 'What is the primary purpose of a business?',
            options: ['To create jobs', 'To generate profit', 'To provide services', 'To enhance skills'],
            answer: 'To generate profit',
            answerOption: 'B'
        },
        {
            question: 'Which financial statement shows a company’s revenues and expenses?',
            options: ['Balance Sheet', 'Cash Flow Statement', 'Income Statement', 'Statement of Shareholders’ Equity'],
            answer: 'Income Statement',
            answerOption: 'C'
        },
        {
            question: 'What does SWOT analysis stand for?',
            options: ['Strengths, Weaknesses, Opportunities, Threats', 'Sales, Wages, Objectives, Taxes', 'Sales, Wealth, Operations, Trends', 'Strengths, Wages, Objectives, Tactics'],
            answer: 'Strengths, Weaknesses, Opportunities, Threats',
            answerOption: 'A'
        },
        {
            question: 'What is the selling of goods through a network of distributors known as?',
            options: ['Retailing', 'Wholesale', 'Franchising', 'E-commerce'],
            answer: 'Franchising',
            answerOption: 'C'
        },
        {
            question: 'Which of the following is considered a fixed cost?',
            options: ['Rent', 'Raw materials', 'Commissions', 'Utilities'],
            answer: 'Rent',
            answerOption: 'A'
        },
        {
            question: 'What is market segmentation?',
            options: ['Dividing a market into smaller groups', 'Increasing the price of products', 'Assessing financial performance', 'Expanding a market to new demographics'],
            answer: 'Dividing a market into smaller groups',
            answerOption: 'A'
        },
        {
            question: 'Which term refers to the total market value of a company’s outstanding shares?',
            options: ['Market Cap', 'Dividend', 'Earnings Per Share', 'Net Income'],
            answer: 'Market Cap',
            answerOption: 'A'
        },
        {
            question: 'What is the primary goal of a non-profit organization?',
            options: ['To make profit', 'To serve the community', 'To maximize shareholder wealth', 'To minimize costs'],
            answer: 'To serve the community',
            answerOption: 'B'
        },
        {
            question: 'What does “B2B” stand for in commerce?',
            options: ['Business to Buyer', 'Business to Business', 'Buyer to Business', 'Business to Brand'],
            answer: 'Business to Business',
            answerOption: 'B'
        },
        {
            question: 'What is a monopoly?',
            options: ['A market with many competitors', 'A market dominated by one supplier', 'A government-controlled market', 'An open-source market'],
            answer: 'A market dominated by one supplier',
            answerOption: 'B'
        },

    ],
    Fashion: [
        {
            "question": "What is the term for a style of clothing that is popular at a certain time?",
            "options": ["Trend", "Classic", "Timeless", "Vintage"],
            "answer": "Trend",
            "answerOption": "A"
        },
        {
            "question": "Which designer is known for the ‘little black dress’?",
            "options": ["Coco Chanel", "Valentino", "Christian Dior", "Gianni Versace"],
            "answer": "Coco Chanel",
            "answerOption": "A"
        },
        {
            "question": "What is haute couture?",
            "options": ["Mass-produced clothing", "Bespoke fashion", "Casual wear", "Athletic wear"],
            "answer": "Bespoke fashion",
            "answerOption": "B"
        },
        {
            "question": "What does ‘ready-to-wear’ mean?",
            "options": ["Custom-fitted clothing", "Clothes made for production", "Handmade garments", "None of the above"],
            "answer": "Clothes made for production",
            "answerOption": "B"
        },
        {
            "question": "Which fashion accessory is used to hold up trousers?",
            "options": ["Belt", "Scarf", "Brooch", "Cap"],
            "answer": "Belt",
            "answerOption": "A"
        },
        {
            "question": "What is a fashion collection?",
            "options": ["A selection of garments for sale", "A trend forecast", "A runway presentation", "A fashion magazine"],
            "answer": "A selection of garments for sale",
            "answerOption": "A"
        },
        {
            "question": "What does the term ‘fast fashion’ refer to?",
            "options": ["Slow, sustainable clothing", "Quickly produced inexpensive clothing", "Luxury fashion", "Classic timeless wear"],
            "answer": "Quickly produced inexpensive clothing",
            "answerOption": "B"
        },
        {
            "question": "Who is known for the brand Gucci?",
            "options": ["Domenico Dolce", "Guccio Gucci", "Karl Lagerfeld", "Miuccia Prada"],
            "answer": "Guccio Gucci",
            "answerOption": "B"
        },
        {
            "question": "What type of fabric is silk made from?",
            "options": ["Animal fibers", "Plant fibers", "Synthetic fibers", "Mineral fibers"],
            "answer": "Animal fibers",
            "answerOption": "A"
        },
        {
            "question": "Which of the following is a common type of sustainable fabric?",
            "options": ["Polyester", "Cotton", "Tencel", "Nylon"],
            "answer": "Tencel",
            "answerOption": "C"
        },
    ],
    Finance: [  
        {  
            "question": "What is the primary purpose of a budget?",  
            "options": ["To track spending", "To save for retirement", "To invest in the stock market", "To analyze debt"],  
            "answer": "To track spending",  
            "answerOption": "A"  
        },  
        {  
            "question": "What does APR stand for?",  
            "options": ["Annual Percentage Rate", "Annual Payment Rate", "Actual Percentage Rate", "Adjusted Payment Rate"],  
            "answer": "Annual Percentage Rate",  
            "answerOption": "A"  
        },  
        {  
            "question": "What is a mutual fund?",  
            "options": ["A type of savings account", "A pool of funds from multiple investors", "A loan for purchasing a home", "A type of stock"],  
            "answer": "A pool of funds from multiple investors",  
            "answerOption": "B"  
        },  
        {  
            "question": "What is the term for the amount of money you owe?",  
            "options": ["Asset", "Expense", "Liability", "Equity"],  
            "answer": "Liability",  
            "answerOption": "C"  
        },  
        {  
            "question": "Which of the following is considered an asset?",  
            "options": ["Cash", "Debt", "Expenses", "Liabilities"],  
            "answer": "Cash",  
            "answerOption": "A"  
        },  
        {  
            "question": "What is a stock?",  
            "options": ["A loan to a company", "Ownership in a company", "A form of savings", "A type of insurance"],  
            "answer": "Ownership in a company",  
            "answerOption": "B"  
        },  
        {  
            "question": "What is the primary function of a bank?",  
            "options": ["To lend money", "To provide insurance", "To manage investments", "To sell stocks"],  
            "answer": "To lend money",  
            "answerOption": "A"  
        },  
        {  
            "question": "What does diversification mean in investing?",  
            "options": ["Investing in various assets to reduce risk", "Investing only in one asset", "Holding cash only", "Investing in foreign currencies"],  
            "answer": "Investing in various assets to reduce risk",  
            "answerOption": "A"  
        },  
        {  
            "question": "What is inflation?",  
            "options": ["A rise in prices over time", "A fall in prices over time", "Stability in prices", "None of the above"],  
            "answer": "A rise in prices over time",  
            "answerOption": "A"  
        },
    ],
   Science: [  
        {  
            "question": "What is the chemical formula for water?",  
            "options": ["H2O", "CO2", "O2", "NaCl"],  
            "answer": "H2O",  
            "answerOption": "A"  
        },  
        {  
            "question": "What is the powerhouse of the cell?",  
            "options": ["Nucleus", "Mitochondria", "Ribosome", "Endoplasmic Reticulum"],  
            "answer": "Mitochondria",  
            "answerOption": "B"  
        },  
        {  
            "question": "What force keeps the planets in orbit around the sun?",  
            "options": ["Friction", "Magnetism", "Gravity", "Inertia"],  
            "answer": "Gravity",  
            "answerOption": "C"  
        },  
        {  
            "question": "What is the speed of light?",  
            "options": ["300,000 km/s", "150,000 km/s", "700,000 km/s", "1,000,000 km/s"],  
            "answer": "300,000 km/s",  
            "answerOption": "A"  
        },  
        {  
            "question": "What is the most abundant gas in the Earth's atmosphere?",  
            "options": ["Oxygen", "Carbon Dioxide", "Nitrogen", "Hydrogen"],  
            "answer": "Nitrogen",  
            "answerOption": "C"  
        },  
        {  
            "question": "What organ is responsible for pumping blood throughout the body?",  
            "options": ["Liver", "Brain", "Heart", "Lungs"],  
            "answer": "Heart",  
            "answerOption": "C"  
        },  
        {  
            "question": "Which planet is known as the Red Planet?",  
            "options": ["Earth", "Jupiter", "Mars", "Venus"],  
            "answer": "Mars",  
            "answerOption": "C"  
        },  
        {  
            "question": "What is the process of photosynthesis?",  
            "options": ["Conversion of solar energy to chemical energy", "Breaking down glucose", "Respiration in plants", "Pollination"],  
            "answer": "Conversion of solar energy to chemical energy",  
            "answerOption": "A"  
        },  
        {  
            "question": "What is the primary component of the Earth's core?",  
            "options": ["Iron", "Nickel", "Lead", "Copper"],  
            "answer": "Iron",  
            "answerOption": "A"  
        },
        ],
   Politics: [  
        {  
            "question": "What is the supreme law of the land in the United States?",  
            "options": ["The Declaration of Independence", "The Constitution", "The Bill of Rights", "The Emancipation Proclamation"],  
            "answer": "The Constitution",  
            "answerOption": "B"  
        },  
        {  
            "question": "Who is known as the 'Father of Modern Political Science'?",  
            "options": ["Niccolò Machiavelli", "John Locke", "Thomas Hobbes", "Max Weber"],  
            "answer": "Niccolò Machiavelli",  
            "answerOption": "A"  
        },  
        {  
            "question": "What is a democracy?",  
            "options": ["A system of government where citizens vote on laws", "Rule by a king or queen", "A one-party state", "A dictatorship"],  
            "answer": "A system of government where citizens vote on laws",  
            "answerOption": "A"  
        },  
        {  
            "question": "What is the main responsibility of the executive branch?",  
            "options": ["Make laws", "Interpret laws", "Enforce laws", "Create treaties"],  
            "answer": "Enforce laws",  
            "answerOption": "C"  
        },  
        {  
            "question": "Which political theory advocates for the collective ownership of production?",  
            "options": ["Capitalism", "Socialism", "Libertarianism", "Fascism"],  
            "answer": "Socialism",  
            "answerOption": "B"  
        },  
        {  
            "question": "Who was the first woman to serve on the U.S. Supreme Court?",  
            "options": ["Ruth Bader Ginsburg", "Sandra Day O'Connor", "Elena Kagan", "Sonia Sotomayor"],  
            "answer": "Sandra Day O'Connor",  
            "answerOption": "B"  
        },  
        {  
            "question": "What does the term 'separation of powers' refer to?",  
            "options": ["Division of government responsibilities into distinct branches", "The electoral process", "Political party cooperation", "Financial responsibilities of each branch"],  
            "answer": "Division of government responsibilities into distinct branches",  
            "answerOption": "A"  
        },  
        {  
            "question": "Who is the head of the government in the United Kingdom?",  
            "options": ["The President", "The Monarch", "The Prime Minister", "The Chancellor"],  
            "answer": "The Prime Minister",  
            "answerOption": "C"  
        },  
        {  
            "question": "What is a political party?",  
            "options": ["A group of people with similar political beliefs", "A method of voting", "A type of election", "A form of government"],  
            "answer": "A group of people with similar political beliefs",  
            "answerOption": "A"  
        },  
        {  
            "question": "What concept introduced by John Locke influenced democratic thought?",  
            "options": ["Divine right of kings", "Natural rights", "Checks and balances", "Colonialism"],  
            "answer": "Natural rights",  
            "answerOption": "B"  
        }
    ]
}

const category = document.getElementById('category');
let questionIndex = 0;
const startButton = document.getElementById('start-button');
const backButton = document.getElementById('back-button');
const categoryToTest = document.getElementById('category-to-test');
const optionButtons = document.querySelectorAll('.option-button');
const previousButton = document.getElementById('previous-button');
const nextButton = document.getElementById('next-button');
const selectedAnswers = [];
const theCorrectAnswers = [];
const submitMessage = document.getElementById('submit-message');
const pickAnswer = document.getElementById('pick-answer');
let userScore = 0;
const submitAnswer = document.getElementById('submit-answer');
const viewResult = document.getElementById('view-score');
const result = document.getElementById('result');

// Add Event listener to category options.  
category.addEventListener('change', function () {
    category.classList.add('element-to-hide');
    document.getElementById('category-label').classList.add('element-to-hide');
    startButton.classList.remove('element-to-hide');
    backButton.classList.remove('element-to-hide');
});

// Function to allow users to start quiz.  
function start() {
    const categorySelected = category.value;
    questionIndex = 0; // reset question index  
    addQuestionToPage(categorySelected);
    startButton.classList.add('element-to-hide');
    categoryToTest.innerText = `${categorySelected}`
}

// Function to allow users go back to change category.  
function back() {
    location.reload();
}

// Function to add question to page  
function addQuestionToPage(type) {
    document.getElementById('question').classList.remove('element-to-hide');
    document.getElementById('next-button').classList.remove('element-to-hide');
    const categoryQuestion = questions[type];
    document.getElementById('question-area').innerText = (questionIndex + 1) + '.  ' + categoryQuestion[questionIndex].question;
    categoryQuestion[questionIndex].options.forEach((option, index) => {
        const button = document.getElementById(String.fromCharCode(65 + index));
        button.innerText = option.trim(); // A, B, C, D
    });
    const cateqoryQuestionsName = document.querySelectorAll('.option-button');
    cateqoryQuestionsName.forEach(quest => {
        quest.setAttribute('name', `optionsFor${questionIndex}`);
    })
}

// Event listeners to each option button  
optionButtons.forEach(button => {
    button.addEventListener('click', function (event) {
        optionButtons.forEach(btn => {
            btn.classList.remove('chosen-option');
        });
        button.classList.add('chosen-option');
    });
});

// Store user answers function  
function storeUserAnswers() {
    const selectedOption = document.querySelector(`input[name="optionsFor${questionIndex}"]:checked`);
    if (selectedOption) {
        selectedAnswers[questionIndex] = selectedOption.value; // Store the selected answer (A, B, C, D)  
    } console.log(selectedAnswers);
}

// function to store the correct answers
function storeCorrectAnswers() {
    const categorySelected = questions[category.value];
    const currentQuestion = categorySelected[questionIndex];
    const correctAnswer = currentQuestion.answerOption;
    theCorrectAnswers[questionIndex] = correctAnswer;
    console.log(theCorrectAnswers);
}

// function to uncheck the previously checked option.
function resetOption() {
    const categorySelected = category.value;
    const categoryQuestion = questions[categorySelected];
    const selectedOption = document.querySelector(`input[name="optionsFor${questionIndex}"]:checked`);
    if (selectedOption === true) {
        if (categoryQuestion && questionIndex < categoryQuestion.length - 1) {
            selectedOption.checked = false;
        }
    } else if (!selectedOption) {
        if (pickAnswer.style.display === "none") {
            pickAnswer.classList.remove("fade-out");
            pickAnswer.classList.add("fade-in");
            pickAnswer.style.display = "block";

            // wait for the fade-in transition to finish then remove the class  
            setTimeout(() => {
                pickAnswer.classList.remove("fade-in");
            }, 300); // Match the duration of the CSS transition  
        } else {
            pickAnswer.classList.add("fade-out");

            // Wait for the fade-out transition to finish, then hide the div  
            setTimeout(() => {
                pickAnswer.style.display = "none";
                pickAnswer.classList.remove("fade-out");
            }, 300); // Match the duration of the CSS transition  
        }

    }
}

// function to four answered question to retain their answer.
function retainAnswer() {
    const userAswer = document.querySelectorAll(`input[name="optionsFor${questionIndex}"]`);
    userAswer.forEach(answer => {
        if (answer.value === selectedAnswers[questionIndex]) {
            answer.checked = true;
        } else {
            answer.checked = false;
        }
    });
}

// Add event listener to next button  
nextButton.addEventListener('click', function () {
    storeUserAnswers(); // Call here before moving to the next question 
    storeCorrectAnswers();
    resetOption();
    previousButton.classList.remove('element-to-hide');
    const categorySelected = category.value;
    questionIndex++; // Move to the next question  
    if (questionIndex < questions[categorySelected].length) {
        addQuestionToPage(categorySelected); // Display the next question  
    } else {
        nextButton.classList.add('element-to-hide');
        previousButton.innerText = 'GO BACK';
        submitMessage.classList.remove('element-to-hide');
        document.getElementById('question').classList.add('element-to-hide');


    }
    retainAnswer();
});

// Add event listener to previous button  
previousButton.addEventListener('click', function () {
    previousButton.innerText = 'PREVIOUS';
    nextButton.classList.remove('element-to-hide');
    submitMessage.classList.add('element-to-hide'); //    
    const categorySelected = category.value;
    questionIndex--; // Move to the previous question  
    if (questionIndex >= 0) {
        addQuestionToPage(categorySelected); // Display the previous question  
    } else {
        questionIndex++; // Stay on the first question 

    }
    retainAnswer();
    updateVisibility();
});

// Update visibility function to manage button states  
function updateVisibility() {
    if (questionIndex < 1) {
        previousButton.classList.add('element-to-hide');
    } else {
        previousButton.classList.remove('element-to-hide');
    }
}

// funtion to compare users answers with the correct option.
function compareAnswers(array1, array2) {
    let resemblances = 0;
    let non_resemblances = 0;

    // Determine the length of the shorter array  
    const length = Math.min(array1.length, array2.length);

    // Compare elements at the same index  
    for (let i = 0; i < length; i++) {
        if (array1[i] === array2[i]) {
            resemblances++;
        } else {
            non_resemblances++;
        }
    }
    // Count remaining elements in the longer array as non-resemblances  
    non_resemblances += Math.abs(array1.length - array2.length);
    var scoreAdvice = '';
    const categorySelected = questions[category.value];
    const numOfQuestions = categorySelected.length;
    const averageScore = Math.floor(numOfQuestions * 0.5);
    const excellentScore = Math.floor(numOfQuestions * 0.7)
    if (resemblances <= averageScore) {
        scoreAdvice = 'Work harder, you are not dull!'
    } else if (resemblances > averageScore && resemblances < excellentScore) {
        scoreAdvice = 'You tried, but this is not your limit!'
    } else if (resemblances >= excellentScore) {
        scoreAdvice = 'Bingo! You are excellent!'
    }
    result.innerHTML = `<h5>Your score is ${resemblances}.` + ` ${scoreAdvice}`;
}


submitAnswer.addEventListener('click', function () {
    previousButton.classList.add('element-to-hide');
    submitMessage.classList.add('element-to-hide');
    viewResult.classList.remove('element-to-hide');
});
viewResult.addEventListener('click', function () {
    result.classList.remove('element-to-hide');
    compareAnswers(selectedAnswers, theCorrectAnswers);
});